一.哨兵机制的必要性:在主从库模式下如果主库宕机,则redis集群无法对外提供写服务，这是不能容忍的,所以需要有一个主库挂机后,其他
从库变为主库的机制
二.从库切换主库的三个问题:
    1.监控(主库真的挂了吗):哨兵定期给所有的主从库发送ping命令,如果从库没有在规定时间内回应哨兵的ping则哨兵将其标记为下线
    状态,如果主库没有回应哨兵的ping命令则哨兵判断主库主观下线,如果集群大多判断下线则为客观下线,开始自主切换主库的流程
        a.主观下线:哨兵发送的ping命令没有得到及时回应
        b.客观下线:哨兵集群中大多数哨兵都判断主库主观下线
    2.选主(选择哪一个从库成为主库):筛选+打分
        a.筛选:在选择主库之前会筛选掉那些网络状况不好的从库,其依据是断连次数以及最大连接时间
        b.打分:哨兵会按照优先级,数据完善程度,从库ID三方面依次打分
            优先级:每个从库可以设置一个优先级,在选主的时候,优先级高的成为主库,如果优先级一样则进入下一轮
            数据完善程度:查看从库的slave_repl_offset变量,和master_repl_offset最近的变量成为主库,如果一样则进入下一轮
            ID号:ID号最小的从库,成为主库
    3.通知:哨兵会将新主库的信息发送给其他从库,其他从库执行replicaof命令和新主库建立连接,进行数据复制;哨兵还会将新主库的信息
    通知客户端,让他们把消息发送到新主库上