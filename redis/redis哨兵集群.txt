一.为什么要有哨兵集群:哨兵机制是用来解决主库挂掉的问题的,但哨兵如果是一个单节点的话,哨兵自己也可能挂掉,所以需要用一个集群来
实现
二.哨兵之间互相发现:在配置哨兵时,只会配置主库的IP,端口,所有的哨兵会订阅主库的"__sentinel__:hello"频道,并定时发布自己的信息
三.哨兵和从库的连接:哨兵向主库发送INFO命令完成,主库接到命令后会将从库列表返回给哨兵,哨兵得到信息后会和从库建立连接,并监控
四.客户端获取哨兵事件:客户端可以订阅哨兵的消息,来得到哨兵内发生的事件
五.leader哨兵的选举
    1.leader哨兵:在确定主库客观下线后需要有一个哨兵出来选择从库,将其切换为主库,这个哨兵就是leader哨兵
    2.leader哨兵的选举:任何哨兵检测到主库主观下线后会立马发送is-master-down-by-addr命令给其他哨兵进行投票,其他哨兵会根据
    自己的请况回复Y或者N,当这个哨兵得到配置的票后断定主库客观下线，此时哨兵会发起投票,其他哨兵如果收到投票后还没透过票会默认
    投赞成票,一旦某个哨兵拿到了半数以上的票且票数还大于配置的票数,其就成为了leader
    3.如果没有哨兵满足条件成为leader:如果本轮没有选出leader则会在隔一段时间后重新开始选举